{"filter":false,"title":"area.rb","tooltip":"/app/models/area.rb","undoManager":{"mark":100,"position":100,"stack":[[{"start":{"row":138,"column":0},"end":{"row":138,"column":1},"action":"remove","lines":["`"],"id":3138}],[{"start":{"row":138,"column":0},"end":{"row":138,"column":2},"action":"insert","lines":["  "],"id":3139}],[{"start":{"row":138,"column":2},"end":{"row":138,"column":4},"action":"insert","lines":["  "],"id":3140}],[{"start":{"row":138,"column":16},"end":{"row":138,"column":23},"action":"remove","lines":["Mobiles"],"id":3141},{"start":{"row":138,"column":16},"end":{"row":138,"column":17},"action":"insert","lines":["O"]}],[{"start":{"row":138,"column":17},"end":{"row":138,"column":18},"action":"insert","lines":["b"],"id":3142}],[{"start":{"row":138,"column":18},"end":{"row":138,"column":19},"action":"insert","lines":["j"],"id":3143}],[{"start":{"row":138,"column":19},"end":{"row":138,"column":20},"action":"insert","lines":["e"],"id":3144}],[{"start":{"row":138,"column":20},"end":{"row":138,"column":21},"action":"insert","lines":["c"],"id":3145}],[{"start":{"row":138,"column":21},"end":{"row":138,"column":22},"action":"insert","lines":["t"],"id":3146}],[{"start":{"row":138,"column":22},"end":{"row":138,"column":23},"action":"insert","lines":["s"],"id":3147}],[{"start":{"row":141,"column":7},"end":{"row":142,"column":0},"action":"insert","lines":["",""],"id":3148},{"start":{"row":142,"column":0},"end":{"row":142,"column":4},"action":"insert","lines":["    "]}],[{"start":{"row":142,"column":4},"end":{"row":143,"column":0},"action":"insert","lines":["",""],"id":3149},{"start":{"row":143,"column":0},"end":{"row":143,"column":4},"action":"insert","lines":["    "]}],[{"start":{"row":143,"column":4},"end":{"row":144,"column":0},"action":"insert","lines":["",""],"id":3150},{"start":{"row":144,"column":0},"end":{"row":144,"column":4},"action":"insert","lines":["    "]}],[{"start":{"row":139,"column":43},"end":{"row":140,"column":0},"action":"insert","lines":["",""],"id":3151},{"start":{"row":140,"column":0},"end":{"row":140,"column":6},"action":"insert","lines":["      "]}],[{"start":{"row":140,"column":6},"end":{"row":140,"column":83},"action":"insert","lines":["mobiles_block = parse_mobiles( area_file.match(/^#MOBILES\\n#(.*?)\\n#0/m)[1] )"],"id":3152}],[{"start":{"row":140,"column":28},"end":{"row":140,"column":34},"action":"remove","lines":["mobile"],"id":3153},{"start":{"row":140,"column":28},"end":{"row":140,"column":29},"action":"insert","lines":["o"]}],[{"start":{"row":140,"column":29},"end":{"row":140,"column":30},"action":"insert","lines":["b"],"id":3154}],[{"start":{"row":140,"column":30},"end":{"row":140,"column":31},"action":"insert","lines":["j"],"id":3155}],[{"start":{"row":140,"column":31},"end":{"row":140,"column":32},"action":"insert","lines":["e"],"id":3156}],[{"start":{"row":140,"column":32},"end":{"row":140,"column":33},"action":"insert","lines":["c"],"id":3157}],[{"start":{"row":140,"column":33},"end":{"row":140,"column":34},"action":"insert","lines":["t"],"id":3158}],[{"start":{"row":140,"column":34},"end":{"row":140,"column":35},"action":"insert","lines":["s"],"id":3159}],[{"start":{"row":140,"column":34},"end":{"row":140,"column":35},"action":"remove","lines":["s"],"id":3160}],[{"start":{"row":140,"column":53},"end":{"row":140,"column":77},"action":"remove","lines":["/^#MOBILES\\n#(.*?)\\n#0/m"],"id":3161},{"start":{"row":140,"column":53},"end":{"row":140,"column":72},"action":"insert","lines":["/^#OBJECTS.*?\\n#0/m"]}],[{"start":{"row":140,"column":63},"end":{"row":140,"column":64},"action":"insert","lines":["("],"id":3162}],[{"start":{"row":140,"column":67},"end":{"row":140,"column":68},"action":"insert","lines":[")"],"id":3163}],[{"start":{"row":140,"column":6},"end":{"row":140,"column":19},"action":"remove","lines":["mobiles_block"],"id":3164},{"start":{"row":140,"column":6},"end":{"row":140,"column":19},"action":"insert","lines":["objects_block"]}],[{"start":{"row":141,"column":0},"end":{"row":141,"column":58},"action":"remove","lines":["      objects_block = area_file.match(/^#OBJECTS.*?\\n#0/m)"],"id":3165}],[{"start":{"row":140,"column":80},"end":{"row":141,"column":0},"action":"remove","lines":["",""],"id":3166}],[{"start":{"row":504,"column":0},"end":{"row":527,"column":3},"action":"insert","lines":["def parse_objects(objects_block)","  objects_info = Hash.new","  i = 1","  ","  objects = objects_block.split(\"#\").map(&:strip)","  ","  objects.each do |object|","    m = object.match(/^(\\d*)\\n(.*)~\\n(.*)~\\n(.*)\\n~\\n/)","    if m","      object_info = Hash.new","      object_info[\"vnum\"]     = m[1].to_i","      object_info[\"keywords\"] = m[2].strip","      object_info[\"sdesc\"]    = m[3].strip","      object_info[\"ldesc\"]    = m[4].strip","      ","      objects_info[i] = object_info","    else","      objects_info[i] = 'bad object'","    end","    i = i + 1","  end","  ","  return objects_info","end"],"id":3167}],[{"start":{"row":139,"column":33},"end":{"row":139,"column":34},"action":"insert","lines":["\\"],"id":3168}],[{"start":{"row":139,"column":34},"end":{"row":139,"column":35},"action":"insert","lines":["n"],"id":3169}],[{"start":{"row":140,"column":63},"end":{"row":140,"column":65},"action":"insert","lines":["\\n"],"id":3170}],[{"start":{"row":145,"column":31},"end":{"row":145,"column":33},"action":"insert","lines":["\\n"],"id":3171}],[{"start":{"row":146,"column":44},"end":{"row":146,"column":46},"action":"insert","lines":["\\n"],"id":3172}],[{"start":{"row":148,"column":33},"end":{"row":148,"column":35},"action":"insert","lines":["\\n"],"id":3173}],[{"start":{"row":149,"column":48},"end":{"row":149,"column":50},"action":"insert","lines":["\\n"],"id":3174}],[{"start":{"row":151,"column":32},"end":{"row":151,"column":34},"action":"insert","lines":["\\n"],"id":3175}],[{"start":{"row":152,"column":46},"end":{"row":152,"column":48},"action":"insert","lines":["\\n"],"id":3176}],[{"start":{"row":154,"column":31},"end":{"row":154,"column":33},"action":"insert","lines":["\\n"],"id":3177}],[{"start":{"row":155,"column":44},"end":{"row":155,"column":46},"action":"insert","lines":["\\n"],"id":3178}],[{"start":{"row":157,"column":34},"end":{"row":157,"column":36},"action":"insert","lines":["\\n"],"id":3179}],[{"start":{"row":158,"column":50},"end":{"row":158,"column":52},"action":"insert","lines":["\\n"],"id":3180}],[{"start":{"row":160,"column":32},"end":{"row":160,"column":34},"action":"insert","lines":["\\n"],"id":3181}],[{"start":{"row":161,"column":46},"end":{"row":161,"column":48},"action":"insert","lines":["\\n"],"id":3182}],[{"start":{"row":163,"column":34},"end":{"row":163,"column":36},"action":"insert","lines":["\\n"],"id":3183}],[{"start":{"row":164,"column":50},"end":{"row":164,"column":52},"action":"insert","lines":["\\n"],"id":3184}],[{"start":{"row":139,"column":35},"end":{"row":139,"column":36},"action":"insert","lines":["#"],"id":3185}],[{"start":{"row":140,"column":65},"end":{"row":140,"column":66},"action":"insert","lines":["#"],"id":3186}],[{"start":{"row":145,"column":33},"end":{"row":145,"column":34},"action":"insert","lines":["#"],"id":3187}],[{"start":{"row":146,"column":46},"end":{"row":146,"column":47},"action":"insert","lines":["#"],"id":3188}],[{"start":{"row":146,"column":47},"end":{"row":146,"column":48},"action":"insert","lines":["("],"id":3189}],[{"start":{"row":146,"column":51},"end":{"row":146,"column":52},"action":"insert","lines":[")"],"id":3190}],[{"start":{"row":148,"column":35},"end":{"row":148,"column":36},"action":"insert","lines":["#"],"id":3191}],[{"start":{"row":149,"column":50},"end":{"row":149,"column":51},"action":"insert","lines":["#"],"id":3192}],[{"start":{"row":149,"column":51},"end":{"row":149,"column":52},"action":"insert","lines":["("],"id":3193}],[{"start":{"row":149,"column":55},"end":{"row":149,"column":56},"action":"insert","lines":[")"],"id":3194}],[{"start":{"row":0,"column":36},"end":{"row":1,"column":0},"action":"insert","lines":["",""],"id":3198}],[{"start":{"row":1,"column":0},"end":{"row":1,"column":36},"action":"insert","lines":["require_relative '_import_functions'"],"id":3199}],[{"start":{"row":1,"column":34},"end":{"row":1,"column":35},"action":"remove","lines":["s"],"id":3200}],[{"start":{"row":1,"column":33},"end":{"row":1,"column":34},"action":"remove","lines":["n"],"id":3201}],[{"start":{"row":1,"column":32},"end":{"row":1,"column":33},"action":"remove","lines":["o"],"id":3202}],[{"start":{"row":1,"column":31},"end":{"row":1,"column":32},"action":"remove","lines":["i"],"id":3203}],[{"start":{"row":1,"column":30},"end":{"row":1,"column":31},"action":"remove","lines":["t"],"id":3204}],[{"start":{"row":1,"column":29},"end":{"row":1,"column":30},"action":"remove","lines":["c"],"id":3205}],[{"start":{"row":1,"column":28},"end":{"row":1,"column":29},"action":"remove","lines":["n"],"id":3206}],[{"start":{"row":1,"column":27},"end":{"row":1,"column":28},"action":"remove","lines":["u"],"id":3207}],[{"start":{"row":1,"column":26},"end":{"row":1,"column":27},"action":"remove","lines":["f"],"id":3208}],[{"start":{"row":1,"column":25},"end":{"row":1,"column":26},"action":"remove","lines":["_"],"id":3209}],[{"start":{"row":1,"column":24},"end":{"row":1,"column":25},"action":"remove","lines":["t"],"id":3210}],[{"start":{"row":1,"column":23},"end":{"row":1,"column":24},"action":"remove","lines":["r"],"id":3211}],[{"start":{"row":1,"column":22},"end":{"row":1,"column":23},"action":"remove","lines":["o"],"id":3212}],[{"start":{"row":1,"column":21},"end":{"row":1,"column":22},"action":"remove","lines":["p"],"id":3213}],[{"start":{"row":1,"column":20},"end":{"row":1,"column":21},"action":"remove","lines":["m"],"id":3214}],[{"start":{"row":1,"column":19},"end":{"row":1,"column":20},"action":"remove","lines":["i"],"id":3215}],[{"start":{"row":1,"column":19},"end":{"row":1,"column":20},"action":"insert","lines":["t"],"id":3216}],[{"start":{"row":1,"column":20},"end":{"row":1,"column":21},"action":"insert","lines":["r"],"id":3217}],[{"start":{"row":1,"column":21},"end":{"row":1,"column":22},"action":"insert","lines":["a"],"id":3218}],[{"start":{"row":1,"column":22},"end":{"row":1,"column":23},"action":"insert","lines":["n"],"id":3219}],[{"start":{"row":1,"column":23},"end":{"row":1,"column":24},"action":"insert","lines":["s"],"id":3220}],[{"start":{"row":1,"column":24},"end":{"row":1,"column":25},"action":"insert","lines":["l"],"id":3221}],[{"start":{"row":1,"column":25},"end":{"row":1,"column":26},"action":"insert","lines":["a"],"id":3222}],[{"start":{"row":1,"column":26},"end":{"row":1,"column":27},"action":"insert","lines":["t"],"id":3223}],[{"start":{"row":1,"column":27},"end":{"row":1,"column":28},"action":"insert","lines":["e"],"id":3224}],[{"start":{"row":0,"column":25},"end":{"row":0,"column":26},"action":"remove","lines":["_"],"id":3225}],[{"start":{"row":0,"column":25},"end":{"row":0,"column":26},"action":"remove","lines":["f"],"id":3226}],[{"start":{"row":0,"column":25},"end":{"row":0,"column":26},"action":"remove","lines":["u"],"id":3227}],[{"start":{"row":0,"column":25},"end":{"row":0,"column":26},"action":"remove","lines":["n"],"id":3228}],[{"start":{"row":0,"column":25},"end":{"row":0,"column":26},"action":"remove","lines":["c"],"id":3229}],[{"start":{"row":0,"column":25},"end":{"row":0,"column":26},"action":"remove","lines":["t"],"id":3230}],[{"start":{"row":0,"column":25},"end":{"row":0,"column":26},"action":"remove","lines":["i"],"id":3231}],[{"start":{"row":0,"column":25},"end":{"row":0,"column":26},"action":"remove","lines":["o"],"id":3232}],[{"start":{"row":0,"column":25},"end":{"row":0,"column":26},"action":"remove","lines":["n"],"id":3233}],[{"start":{"row":0,"column":25},"end":{"row":0,"column":26},"action":"remove","lines":["s"],"id":3234}],[{"start":{"row":438,"column":0},"end":{"row":503,"column":3},"action":"remove","lines":["def num_to_dir(i)","  $word = nil","  $word = 'North' if i == 0","  $word = 'East' if i == 1","  $word = 'South' if i == 2","  $word = 'West' if i == 3","  $word = 'Up' if i == 4","  $word = 'Down' if i == 5","  return $word","end","","def opposite_dir(i)","  $dir = nil","  $dir = 0 if i == 2  # N opposite of S","  $dir = 2 if i == 0  # S opposite of N","  $dir = 1 if i == 3  # E opposite of W","  $dir = 3 if i == 1  # W opposite of E","  $dir = 4 if i == 5  # U opposite of D","  $dir = 5 if i == 4  # D opposite of U","  return $dir","end","","def hour_from_num(i)","  $hour = nil","  $hour = '12AM' if i == 0","  $hour = '1AM' if i == 1","  $hour = '2AM' if i == 2","  $hour = '3AM' if i == 3","  $hour = '4AM' if i == 4","  $hour = '5AM' if i == 5","  $hour = '6AM' if i == 6","  $hour = '7AM' if i == 7","  $hour = '8AM' if i == 8","  $hour = '9AM' if i == 9","  $hour = '10AM' if i == 10","  $hour = '11AM' if i == 11","  $hour = '12PM' if i == 12","  $hour = '1PM' if i == 13","  $hour = '2PM' if i == 14","  $hour = '3PM' if i == 15","  $hour = '4PM' if i == 16","  $hour = '5PM' if i == 17","  $hour = '6PM' if i == 18","  $hour = '7PM' if i == 19","  $hour = '8PM' if i == 20","  $hour = '9PM' if i == 21","  $hour = '10PM' if i == 22","  $hour = '11PM' if i == 23","  return $hour","end","","def race_from_num(i)","  $race = nil","  $race = 'no one' if i == -1","  $race = 'humans' if i == 0","  $race = 'dwarves' if i == 1","  $race = 'elves' if i == 2","  $race = 'gnomes' if i == 3","  $race = 'halfelves' if i == 4","  $race = 'halflings' if i == 5","  $race = 'aarakocra' if i == 6","  $race = 'giants' if i == 7","  $race = 'minotaurs' if i == 8","  $race = 'ogres' if i == 9","  return $race","end"],"id":3235}],[{"start":{"row":437,"column":0},"end":{"row":438,"column":0},"action":"remove","lines":["",""],"id":3236}],[{"start":{"row":436,"column":3},"end":{"row":437,"column":0},"action":"remove","lines":["",""],"id":3237}],[{"start":{"row":306,"column":0},"end":{"row":367,"column":3},"action":"remove","lines":["def object_type_from_num(i)","  $object_type = nil","  $object_type = 'N/A' if i == 0","  $object_type = 'ARMOR' if i == 9","  $object_type = 'ARMOR ANIMAL' if i == 14","  $object_type = 'BOAT' if i == 22","  $object_type = 'CONTAINER' if i == 15","  $object_type = 'DECORATION' if i == 27","  $object_type = 'DRINK CONTAINER' if i == 17","  $object_type = 'FETISH' if i == 7","  $object_type = 'FOOD' if i == 19","  $object_type = 'FOUNTAIN' if i == 25","  $object_type = 'FURNITURE' if i == 12","  $object_type = 'JEWELRY' if i == 30","  $object_type = 'KEY' if i == 18","  $object_type = 'LIGHT' if i == 1","  $object_type = 'MONEY' if i == 20","  $object_type = 'PET FOOD' if i == 11","  $object_type = 'PILL' if i == 26","  $object_type = 'POTION' if i == 10","  $object_type = 'RELIC' if i == 33","  $object_type = 'RING' if i == 29","  $object_type = 'SCROLL' if i == 2","  $object_type = 'STAFF' if i == 4","  $object_type = 'TRASH' if i == 13","  $object_type = 'TREASURE' if i == 8","  $object_type = 'WAND' if i == 3","  $object_type = 'WEAPON' if i == 5","  $object_type = 'WEAPON ANIMAL' if i == 6","  return $object_type","end","","def num_to_exits(i)","  $exit_list = nil","  $exit_list = 'n' if i == 0","  $exit_list = 'n, e' if i == 1","  $exit_list = 'n, e, s' if i == 2","  $exit_list = 'n, e, s, w' if i == 3","  $exit_list = 'n, e, s, w, u' if i == 4","  $exit_list = 'n, e, s, w, u, d' if i == 5","  return $exit_list","end","","def num_to_attribute(i)","  $attribute = nil","  $attribute = 'STR' if i == 0","  $attribute = 'INT' if i == 1","  $attribute = 'WIS' if i == 2","  $attribute = 'DEX' if i == 3","  $attribute = 'CON' if i == 4","  $attribute = 'CHR' if i == 5","  $attribute = 'LUC' if i == 6","  return $attribute","end","","def door_state(i)","  $state = nil","  $state = 'open' if i == 0","  $state = 'closed' if i == 1","  $state = 'closed+locked' if i == 2","  return $state","end"],"id":3238}],[{"start":{"row":305,"column":0},"end":{"row":306,"column":0},"action":"remove","lines":["",""],"id":3239}],[{"start":{"row":304,"column":0},"end":{"row":305,"column":0},"action":"remove","lines":["",""],"id":3240}],[{"start":{"row":303,"column":3},"end":{"row":304,"column":0},"action":"remove","lines":["",""],"id":3241}]]},"ace":{"folds":[],"scrolltop":4188,"scrollleft":0,"selection":{"start":{"row":303,"column":3},"end":{"row":303,"column":3},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":298,"state":"start","mode":"ace/mode/ruby"}},"timestamp":1460823722471,"hash":"5cb644c987f8bbb0fe89c98f7a7f96dbbb2e6628"}