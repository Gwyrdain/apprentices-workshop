<%- model_class = Area -%>
<div class="panel panel-default monospace">
    <div class="panel-heading"><h3>
     My Areas
    </h3></div>
    <div class="panel-body">

      <table class="table table-hover monospace">
        <thead>
          <tr>
            <th>Area #</th>
            <th>Vnum Qty</th>
            <th>Name</th>
            <th>Helps</th>
            <th>Mobiles</th>
            <th>Objects</th>
            <th>Rooms</th>
            <th>User</th>
            <th><%=t '.actions', :default => t("helpers.actions") %></th>
          </tr>
        </thead>
      
        <tbody>
          <% @areas.order(:area_number).where(:user => current_user.id).each do |area| %>
            <tr>
              <td><%= area.area_number %></td>
              <td><%= area.vnum_qty %></td>
              <td>
                <%= link_to(area) do %><%= area.name %><% end %>
              </td>
              <td><%= area.helps.count %></td>
              <td><%= area.mobiles.count %></td>
              <td><%= area.objs.count %></td>
              <td><%= area.rooms.count %></td>
              <td><%= area.user.email %></td>
              <td>
                <%= link_to area_path(area), :class => 'btn btn-xs', :title => "#{ t('.show', :default => t('helpers.links.show')) }" do %>
                  <%= glyph 'info-sign' %>
                <%- end -%>
                <%= link_to edit_area_path(area), :class => 'btn btn-xs', :title => "#{ t('.edit', :default => t('helpers.links.edit')) }" do %>
                  <%= glyph 'pencil' %>
                <%- end -%>
                <%= link_to area_path(area), :method => :delete, :data => { :confirm => t('.confirm', :default => t("helpers.links.confirm", :default => 'Are you sure?')) }, :class => 'btn btn-xs', :title => "#{ t('.destroy', :default => t('helpers.links.destroy')) }" do %>
                  <%= glyph 'remove' %>
                <%- end -%>
              </td>
            </tr>
          <% end %>
        </tbody>
      </table>
      
    </div>
    
    <div class="panel-footer">
      <%= link_to 'New Area', new_area_path, :class => 'btn btn-primary'  %>
      <% if current_user.is_admin? %>
        <%= link_to 'Import Area', new_area_path(:import => true), :class => 'btn btn-warning'  %>
      <% end %>

    </div>
    
</div>


<div class="panel panel-default monospace">
    <div class="panel-heading"><h3>
     Other Areas (Shared With Me)
    </h3></div>
    <div class="panel-body">

      <table class="table table-hover monospace">
        <thead>
          <tr>
            <th>Area #</th>
            <th>Vnum Qty</th>
            <th>Name</th>
            <th>Helps</th>
            <th>Mobiles</th>
            <th>Objects</th>
            <th>Rooms</th>
            <th>User</th>
            <th><%=t '.actions', :default => t("helpers.actions") %></th>
          </tr>
        </thead>
      
        <tbody>
          <% @areas.order(:area_number).where.not(:user => current_user.id).each do |area| %>
            <% if ( area.shared_with?(current_user) || area.share_publicly? ) %>
              <tr>
                <td><%= area.area_number %></td>
                <td><%= area.vnum_qty %></td>
                <td>
                  <%= link_to(area) do %><%= area.name %><% end %>
                </td>
                <td><%= area.helps.count %></td>
                <td><%= area.mobiles.count %></td>
                <td><%= area.objs.count %></td>
                <td><%= area.rooms.count %></td>
                <td><%= area.user.email %></td>
                <td>
                  <%= link_to area_path(area), :class => 'btn btn-xs', :title => "#{ t('.show', :default => t('helpers.links.show')) }" do %>
                    <%= glyph 'info-sign' %>
                  <%- end -%>
                  <%= link_to edit_area_path(area), :class => 'btn btn-xs', :title => "#{ t('.edit', :default => t('helpers.links.edit')) }" do %>
                    <%= glyph 'pencil' %>
                  <%- end -%>
                  <%= link_to area_path(area), :method => :delete, :data => { :confirm => t('.confirm', :default => t("helpers.links.confirm", :default => 'Are you sure?')) }, :class => 'btn btn-xs', :title => "#{ t('.destroy', :default => t('helpers.links.destroy')) }" do %>
                    <%= glyph 'remove' %>
                  <%- end -%>
                </td>
              </tr>
            <% end %>
          <% end %>
        </tbody>
      </table>
      
    </div>

</div>

<% if current_user.is_admin? %>
  <div class="panel panel-default monospace">
      <div class="panel-heading"><h3>
       Other Areas (Seen As Admin)
      </h3></div>
      <div class="panel-body">
  
        <table class="table table-hover monospace">
          <thead>
            <tr>
              <th>Area #</th>
              <th>Vnum Qty</th>
              <th>Name</th>
              <th>Helps</th>
              <th>Mobiles</th>
              <th>Objects</th>
              <th>Rooms</th>
              <th>User</th>
              <th><%=t '.actions', :default => t("helpers.actions") %></th>
            </tr>
          </thead>
        
          <tbody>
            <% @areas.order(:area_number).where.not(:user => current_user.id).each do |area| %>
              <% if !( area.shared_with?(current_user) || area.share_publicly? ) %>
                <tr>
                  <td><%= area.area_number %></td>
                  <td><%= area.vnum_qty %></td>
                  <td>
                    <%= link_to(area) do %><%= area.name %><% end %>
                  </td>
                  <td><%= area.helps.count %></td>
                  <td><%= area.mobiles.count %></td>
                  <td><%= area.objs.count %></td>
                  <td><%= area.rooms.count %></td>
                  <td><%= area.user.email %></td>
                  <td>
                    <%= link_to area_path(area), :class => 'btn btn-xs', :title => "#{ t('.show', :default => t('helpers.links.show')) }" do %>
                      <%= glyph 'info-sign' %>
                    <%- end -%>
                    <%= link_to edit_area_path(area), :class => 'btn btn-xs', :title => "#{ t('.edit', :default => t('helpers.links.edit')) }" do %>
                      <%= glyph 'pencil' %>
                    <%- end -%>
                    <%= link_to area_path(area), :method => :delete, :data => { :confirm => t('.confirm', :default => t("helpers.links.confirm", :default => 'Are you sure?')) }, :class => 'btn btn-xs', :title => "#{ t('.destroy', :default => t('helpers.links.destroy')) }" do %>
                      <%= glyph 'remove' %>
                    <%- end -%>
                  </td>
                </tr>
              <% end %>
            <% end %>
          </tbody>
        </table>
        
      </div>
  
  </div>
<% end %>