<%- model_class = Mobile -%>

<div class="panel panel-default monospace">
  <div class="panel-heading">
    <h3>
      <%= link_to @area.name, area_path(@area) %> /
      <%= link_to 'Mobiles', area_mobiles_path(@area) %> /
      Mobile: <%= @mobile.vnum %>
      <%= link_to new_area_mobile_path(@area), :class => 'btn btn-xs', :title => "#{ t('.new', :default => t('helpers.links.new')) }" do %>
        <%= glyph 'plus' %>
      <%- end -%>
        <div class="btn-group pull-right" role="group" aria-label="...">
          <% if @mobile.last_mobile %><%= link_to "Last Mobile: #{@mobile.last_mobile.vnum}", area_mobile_path(@area, @mobile.last_mobile), :class => 'btn btn-default' %><% end %>
          <% if @mobile.next_mobile %><%= link_to "Next Mobile: #{@mobile.next_mobile.vnum}", area_mobile_path(@area, @mobile.next_mobile), :class => 'btn btn-default' %><% end %>
        </div>
    </h3>
  </div>
  <div class="panel-body">
    
  <div class="row">
    <div class="col-md-2">
      <strong>Formal Vnum:</strong>
    </div>
    <div class="col-md-10">
      <div class="col-md-10">
        <%= @mobile.formal_vnum %>
      </div>
    </div>
  </div><br/>

  <div class="row">
    <div class="col-md-2">
      <strong>Keywords:</strong>
    </div>
    <div class="col-md-10">
      <div class="col-md-10">
        <%= @mobile.keywords %>
      </div>
    </div>
  </div><br/>
  
  <div class="row">
    <div class="col-md-2">
      <strong>Short description:</strong>
    </div>
    <div class="col-md-10">
      <div class="col-md-10">
        <%= @mobile.sdesc %>
      </div>
    </div>
  </div><br/>
  
  <div class="row">
    <div class="col-md-2">
      <strong>Long description:</strong>
    </div>
    <div class="col-md-10">
      <div class="col-md-10">
        <%= @mobile.ldesc %>
      </div>
    </div>
  </div><br/>
  
  <div class="row">
    <div class="col-md-2">
      <strong>Look description:</strong>
    </div>
    <div class="col-md-10">
      <div class="col-md-10">
        <%= simple_format(word_wrap(@mobile.look_desc, line_width: ApplicationController::WORDWRAP_LENGTH)) %>
      </div>
    </div>
  </div><br/>
  
  <div class="row">
    <div class="col-md-2">
      <strong>Action flags:</strong>
    </div>
    <div class="col-md-10">
      <% if @mobile.act_flags == 0 %><div class="col-md-2">NONE</div><% end %>
      <% if @mobile.sentinel? %><div class='col-md-2'>SENTINEL</div><% end %>
      <% if @mobile.scavenger? %><div class='col-md-2'>SCAVENGER</div><% end %>
      <% if @mobile.plant? %><div class='col-md-2'>PLANT</div><% end %>
      <% if @mobile.aggressive? %><div class='col-md-2'>AGGRESSIVE</div><% end %>
      <% if @mobile.stay_area? %><div class='col-md-2'>STAY AREA</div><% end %>
      <% if @mobile.wimpy? %><div class='col-md-2'>WIMPY</div><% end %>
      <% if @mobile.train? %><div class='col-md-2'>TRAIN</div><% end %>
      <% if @mobile.practice? %><div class='col-md-2'>PRACTICE</div><% end %>
      <% if @mobile.super_wimpy? %><div class='col-md-2'>SUPER WIMPY</div><% end %>
      <% if @mobile.assist_same? %><div class='col-md-2'>ASSIST SAME</div><% end %>
      <% if @mobile.assist? %><div class='col-md-2'>ASSIST</div><% end %>
      <% if @mobile.assist_always? %><div class='col-md-2'>ASSIST ALWAYS</div><% end %>
      <% if @mobile.swim? %><div class='col-md-2'>SWIM</div><% end %>
      <% if @mobile.water_only? %><div class='col-md-2'>WATER ONLY</div><% end %>
      <% if @mobile.animal? %><div class='col-md-2'>ANIMAL</div><% end %>
      <% if @mobile.no_wear_eq? %><div class='col-md-2'>NO WEAR EQ</div><% end %>
      <% if @mobile.no_corpse? %><div class='col-md-2'>NO CORPSE</div><% end %>
      <% if @mobile.fireproof? %><div class='col-md-2'>FIREPROOF</div><% end %>
      <% if @mobile.intelligent? %><div class='col-md-2'>INTELLIGENT</div><% end %>
      <% if @mobile.cloaked? %><div class='col-md-2'>CLOAKED</div><% end %>
      <% if @mobile.no_random_eq? %><div class='col-md-2'>NO RANDOM EQ</div><% end %>
    </div>
  </div><br/>
  
  <div class="row">
    <div class="col-md-2">
      <strong>Affect flags:</strong>
    </div>
    <div class="col-md-10">
      <% if @mobile.affect_flags == 0 %><div class="col-md-2">NONE</div><% end %>
      <% if @mobile.blind? %><div class='col-md-2'>BLIND</div><% end %>
      <% if @mobile.invisible? %><div class='col-md-2'>INVISIBLE</div><% end %>
      <% if @mobile.detect_evil? %><div class='col-md-2'>DETECT EVIL</div><% end %>
      <% if @mobile.detect_invis? %><div class='col-md-2'>DETECT INVIS</div><% end %>
      <% if @mobile.detect_magic? %><div class='col-md-2'>DETECT MAGIC</div><% end %>
      <% if @mobile.detect_hidden? %><div class='col-md-2'>DETECT HIDDEN</div><% end %>
      <% if @mobile.detect_good? %><div class='col-md-2'>DETECT GOOD</div><% end %>
      <% if @mobile.sanctuary? %><div class='col-md-2'>SANCTUARY</div><% end %>
      <% if @mobile.faerie_fire? %><div class='col-md-2'>FAERIE FIRE</div><% end %>
      <% if @mobile.infrared? %><div class='col-md-2'>INFRARED</div><% end %>
      <% if @mobile.curse? %><div class='col-md-2'>CURSE</div><% end %>
      <% if @mobile.no_steal? %><div class='col-md-2'>NO STEAL</div><% end %>
      <% if @mobile.poison? %><div class='col-md-2'>POISON</div><% end %>
      <% if @mobile.protect_from_evil? %><div class='col-md-2'>PROTECT FROM EVIL</div><% end %>
      <% if @mobile.protect_from_good? %><div class='col-md-2'>PROTECT FROM GOOD</div><% end %>
      <% if @mobile.sneak? %><div class='col-md-2'>SNEAK</div><% end %>
      <% if @mobile.hide? %><div class='col-md-2'>HIDE</div><% end %>
      <% if @mobile.sleep? %><div class='col-md-2'>SLEEP</div><% end %>
      <% if @mobile.charm? %><div class='col-md-2'>CHARM</div><% end %>
      <% if @mobile.flying? %><div class='col-md-2'>FLYING</div><% end %>
      <% if @mobile.passdoor? %><div class='col-md-2'>PASSDOOR</div><% end %>
      <% if @mobile.no_trace? %><div class='col-md-2'>NO TRACE</div><% end %>
      <% if @mobile.no_sleep? %><div class='col-md-2'>NO SLEEP</div><% end %>
      <% if @mobile.no_summon? %><div class='col-md-2'>NO SUMMON</div><% end %>
      <% if @mobile.no_charm? %><div class='col-md-2'>NO CHARM</div><% end %>
      <% if @mobile.improved_invis? %><div class='col-md-2'>IMPROVED INVIS</div><% end %>
    </div>
  </div><br/>
  
  <div class="row">
    <div class="col-md-2">
      <strong>Alignment:</strong>
    </div>
    <div class="col-md-10">
      <div class="col-md-10">
        <%= @mobile.alignment_word.upcase %>
      </div>
    </div>
  </div><br/>
  
  <div class="row">
    <div class="col-md-2">
      <strong>Level:</strong>
    </div>
    <div class="col-md-10">
      <div class="col-md-10">
        <%= @mobile.level %>
      </div>
    </div>
  </div><br/>
  
  <div class="row">
    <div class="col-md-2">
      <strong>Sex:</strong>
    </div>
    <div class="col-md-10">
      <div class="col-md-10">
        <%= @mobile.sex_word.upcase %>
      </div>
    </div>
  </div><br/>
  
  <div class="row">
    <div class="col-md-2">
      <strong>Languages known:</strong>
    </div>
    <div class="col-md-10">
      <% if @mobile.langs_known == 0 %><div class="col-md-2">NONE</div><% end %>
      <% if @mobile.common? %><div class='col-md-2'>COMMON</div><% end %>
      <% if @mobile.dwarven? %><div class='col-md-2'>DWARVEN</div><% end %>
      <% if @mobile.elven? %><div class='col-md-2'>ELVEN</div><% end %>
      <% if @mobile.gnomish? %><div class='col-md-2'>GNOMISH</div><% end %>
      <% if @mobile.halfling? %><div class='col-md-2'>HALFLING</div><% end %>
      <% if @mobile.aarakocra? %><div class='col-md-2'>AARAKOCRA</div><% end %>
      <% if @mobile.giant? %><div class='col-md-2'>GIANT</div><% end %>
      <% if @mobile.minotaur? %><div class='col-md-2'>MINOTAUR</div><% end %>
      <% if @mobile.ogre? %><div class='col-md-2'>OGRE</div><% end %>
      <% if @mobile.thoras? %><div class='col-md-2'>THORAS</div><% end %>
      <% if @mobile.goblin? %><div class='col-md-2'>GOBLIN</div><% end %>
      <% if @mobile.drow? %><div class='col-md-2'>DROW</div><% end %>
      <% if @mobile.kobold? %><div class='col-md-2'>KOBOLD</div><% end %>
      <% if @mobile.orc? %><div class='col-md-2'>ORC</div><% end %>
      <% if @mobile.troll? %><div class='col-md-2'>TROLL</div><% end %>
      <% if @mobile.sahaguin? %><div class='col-md-2'>SAHAGUIN</div><% end %>
      <% if @mobile.god? %><div class='col-md-2'>GOD</div><% end %>
    </div>
  </div><br/>
  
  <div class="row">
    <div class="col-md-2">
      <strong>Language spoken:</strong>
    </div>
    <div class="col-md-10">
      <div class="col-md-10">
        <%= lang_from_num( @mobile.lang_spoken ) %>
      </div>
    </div>
  </div><br/>

  <div class="row">
    <div class="col-md-2">
      <strong>Special function:</strong>
    </div>
    <div class="col-md-10">
      <% @mobile.specials.each do |special| %>
        <div class="col-md-3">
          <%= link_to special.name, edit_area_mobile_special_path(@area, @mobile, special),:class => 'btn btn-xs btn-info' %>
          <%= link_to area_mobile_special_path(@area, @mobile, special), :method => :delete, :data => { :confirm => t('.confirm', :default => t("helpers.links.confirm", :default => 'Are you sure?')) }, :class => 'btn btn-xs', :title => "#{ t('.destroy', :default => t('helpers.links.destroy')) }" do %>
            <%= glyph 'remove' %>
          <%- end -%>
        </div>
      <% end %>
      <div class="col-md-3">
        <%= link_to 'Add a Special Function', new_area_mobile_special_path(@area, @mobile), :class => 'btn btn-primary btn-xs' %>
      </div>
    </div>
  </div><br/>

  <% if @mobile.specials.count > 0 %>
    <% if @mobile.specials.first.name == 'spec_one_spell' %>
      <div class="row">
        <div class="col-md-2">
          <strong>Spell (spec_one):</strong>
        </div>
        <div class="col-md-10">
          <div class="col-md-10">
            <%= @mobile.spell %>
          </div>
        </div>
      </div><br/>
    <% end %>
  <% end %>
  
  <div class="row">
    <div class="col-md-2">
      <strong>Shopkeeper Info:</strong>
    </div>
    <div class="col-md-10">
      <div class="col-md-10">
        <% if @mobile.shops.count < 1 %>
            <%= link_to 'Make a Shopkeeper', new_area_mobile_shop_path(@area, @mobile), :class => 'btn btn-primary btn-xs' %>
        <% else %>
          <% $shop = @mobile.shops.first %>
          Buying items of type <%= $shop.buy_type_1 > 0 ? object_type_from_num($shop.buy_type_1).downcase : '' %><%= $shop.buy_type_2 > 0 ? " / " + object_type_from_num($shop.buy_type_2).downcase : '' %><%= $shop.buy_type_3 > 0 ? " / " + object_type_from_num($shop.buy_type_3).downcase : '' %><%= $shop.buy_type_4 > 0 ? " / " + object_type_from_num($shop.buy_type_4).downcase : '' %><%= $shop.buy_type_5 > 0 ? " / " + object_type_from_num($shop.buy_type_5).downcase : '' %>.<br/>
          Open from <%= hour_from_num($shop.open_hour) %> to <%= hour_from_num($shop.close_hour) %>.<br/>
          Racial pricing bais given to <%= race_from_num($shop.race) %>.<br/>
          <%= link_to area_mobile_shop_path(@area, @mobile, $shop), :class => 'btn btn-xs', :title => "#{ t('.show', :default => t('helpers.links.show')) }" do %>
            <%= glyph 'info-sign' %>
          <%- end -%>
          <%= link_to edit_area_mobile_shop_path(@area, @mobile, $shop), :class => 'btn btn-xs', :title => "#{ t('.edit', :default => t('helpers.links.edit')) }" do %>
            <%= glyph 'pencil' %>
          <%- end -%>
          <%= link_to area_mobile_shop_path(@area, @mobile, $shop), :method => :delete, :data => { :confirm => t('.confirm', :default => t("helpers.links.confirm", :default => 'Are you sure?')) }, :class => 'btn btn-xs', :title => "#{ t('.destroy', :default => t('helpers.links.destroy')) }" do %>
            <%= glyph 'remove' %>
          <%- end -%>
        <% end %>
      </div>
    </div>
  </div>
  
  <% if @area.show_formatted_blocks? %>
    <br/>
    <strong class="monospace">Formatted Mobile:</strong>
    <p>
        <pre><%= render 'mobiles/mobileblock', :mobile => @mobile %></pre>
    </p>
    
    <% if @mobile.specials.count > 0 %>
      <strong class="monospace">Formatted Special:</strong>
      <p>
          <pre><% @mobile.specials.each do |special| %><%= render 'specials/specialblock', :special => special %>
<% end %></pre>
      </p>
    <% end %>
  
    <% if @mobile.shops.count > 0 %>
      <strong class="monospace">Formatted Shop:</strong>
      <p>
          <pre><%= render 'shops/shopblock', :shop => @mobile.shops.first %></pre>
      </p>
    <% end %>
  <% end %>
  </div>
    
  <div class="panel-footer">
    <%= link_to t('.back', :default => t("helpers.links.back")),
                area_mobiles_path(@area), :class => 'btn btn-default'  %>
    <%= link_to t('.edit', :default => t("helpers.links.edit")),
                edit_area_mobile_path(@area, @mobile), :class => 'btn btn-default' %>
    <%= link_to t('.destroy', :default => t("helpers.links.destroy")),
                area_mobile_path(@area, @mobile),
                :method => 'delete',
                :data => { :confirm => t('.confirm', :default => t("helpers.links.confirm", :default => 'Are you sure?')) },
                :class => 'btn btn-danger' %>
  </div>

</div>