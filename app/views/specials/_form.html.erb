<% hours_list = [
                  ['12AM (00:00)', 0],
                  [' 1AM (01:00)', 1],
                  [' 2AM (02:00)', 2],
                  [' 3AM (03:00)', 3],
                  [' 4AM (04:00)', 4],
                  [' 5AM (05:00)', 5],
                  [' 6AM (06:00)', 6],
                  [' 7AM (07:00)', 7],
                  [' 8AM (08:00)', 8],
                  [' 9AM (09:00)', 9],
                  ['10AM (10:00)', 10],
                  ['11AM (11:00)', 11],
                  ['12PM (12:00)', 12],
                  [' 1PM (13:00)', 13],
                  [' 2PM (14:00)', 14],
                  [' 3PM (15:00)', 15],
                  [' 4PM (16:00)', 16],
                  [' 5PM (17:00)', 17],
                  [' 6PM (18:00)', 18],
                  [' 7PM (19:00)', 19],
                  [' 8PM (20:00)', 20],
                  [' 9PM (21:00)', 21],
                  ['10PM (22:00)', 22],
                  ['11PM (23:00)', 23],
                ]
%>

<%= form_for [@special.mobile.area, @special.mobile, @special], :html => { :class => 'form-horizontal' } do |f| %>
  <% if @special.errors.any? %>
    <div id="error_explanation">
      <h3><%= pluralize(@special.errors.count, "error") %> prohibited saving:</h3>

      <ul>
      <% @special.errors.full_messages.each do |message| %>
        <li><%= message %></li>
      <% end %>
      </ul>
    </div>
  <% end %>

  <div class="form-group">
    <%= f.label :special_type, 'Special Function Type', :class => 'control-label col-md-2' %>
    <div class="col-md-10">
      <%= f.select(:special_type, options_for_select(
          [
            ['Normal Mobile Special Function', 'M'],
            ['Extended Mobile Special Function', 'N']
          ], @special.special_type
        ), {}, {class: "form-control"}) %>
    </div>
  </div>
  
  <fieldset hidden='hidden' id="NormalSpecialFunction">
    <div class="form-group">
      <%= f.label :name, 'Special Function Name', :class => 'control-label col-md-2' %>
      <div class="col-md-10">
        <%= f.select(:name, options_for_select(
            [
              ['init_mage', 'init_mage'],
              ['init_priest', 'init_priest'],
              ['init_shaman', 'init_shaman'],
              ['spec_breath_acid', 'spec_breath_acid'],
              ['spec_breath_any', 'spec_breath_any'],
              ['spec_breath_fire', 'spec_breath_fire'],
              ['spec_breath_frost', 'spec_breath_frost'],
              ['spec_breath_gas', 'spec_breath_gas'],
              ['spec_cast_cleric', 'spec_cast_cleric'],
              ['spec_cast_mage', 'spec_cast_mage'],
              ['spec_cast_shaman', 'spec_cast_shaman'],
              ['spec_cast_undead', 'spec_cast_undead'],
              ['spec_corrosion', 'spec_corrosion'],
              ['spec_demon', 'spec_demon'],
              ['spec_demon_lord', 'spec_demon_lord'],
              ['spec_fight_dirty', 'spec_fight_dirty'],
              ['spec_fire_demon', 'spec_fire_demon'],
              ['spec_guardian_demon', 'spec_guardian_demon'],
              ['spec_mind_affects', 'spec_mind_affects'],
              ['spec_one_spell', 'spec_one_spell'],
              ['spec_pestilence', 'spec_pestilence'],
              ['spec_poison', 'spec_poison'],
              ['spec_poison_sting', 'spec_poison_sting'],
              ['spec_shadow_demon', 'spec_shadow_demon'],
              ['spec_storm_demon', 'spec_storm_demon'],
              ['spec_fido', 'spec_fido'],
              ['spec_grudge', 'spec_grudge'],
              ['spec_guard', 'spec_guard'],
              ['spec_howl', 'spec_howl'],
              ['spec_hunt_area_only', 'spec_hunt_area_only'],
              ['spec_immediate_relay', 'spec_immediate_relay'],
              ['spec_janitor', 'spec_janitor'],
              ['spec_no_hunt', 'spec_no_hunt'],
              ['spec_respawn', 'spec_respawn'],
              ['spec_sleeping_dragon', 'spec_sleeping_dragon'],
              ['spec_teleport_on_load', 'spec_teleport_on_load'],
              ['spec_thief', 'spec_thief']
            ], @special.name
          ), {}, {class: "form-control"}) %>
      </div>
    </div>
  </fieldset>

  <fieldset hidden='hidden' id="ExtendedSpecialFuntion">
    <div class="form-group">
      <%= f.label :name, 'Special Function Name', :class => 'control-label col-md-2' %>
      <div class="col-md-10">
        <%= f.select(:name, options_for_select(
            [
              ['spec_act_on_give', 'spec_act_on_give'],
              ['spec_call_for_help', 'spec_call_for_help'],
              ['spec_mage_protector', 'spec_mage_protector'],
              ['spec_timed_teleport', 'spec_timed_teleport']
            ], @special.name
          ), {}, {id: "ExtendedSpecialField", class: "form-control"}) %>
      </div>
    </div>
  </fieldset>
  
  <fieldset hidden='hidden' id="xGeneric">
    <div class="form-group">
      <%= f.label :extended_value_1, :class => 'control-label col-md-2' %>
      <div class="col-md-10">
        <%= f.text_field :extended_value_1, :class => 'text_field form-control' %>
      </div>
    </div>
    <div class="form-group">
      <%= f.label :extended_value_2, :class => 'control-label col-md-2' %>
      <div class="col-md-10">
        <%= f.text_field :extended_value_2, :class => 'text_field form-control' %>
      </div>
    </div>
    <div class="form-group">
      <%= f.label :extended_value_3, :class => 'control-label col-md-2' %>
      <div class="col-md-10">
        <%= f.text_field :extended_value_3, :class => 'text_field form-control' %>
      </div>
    </div>
    <div class="form-group">
      <%= f.label :extended_value_4, :class => 'control-label col-md-2' %>
      <div class="col-md-10">
        <%= f.text_field :extended_value_4, :class => 'text_field form-control' %>
      </div>
    </div>
    <div class="form-group">
      <%= f.label :extended_value_5, :class => 'control-label col-md-2' %>
      <div class="col-md-10">
        <%= f.text_field :extended_value_5, :class => 'text_field form-control' %>
      </div>
    </div>
  </fieldset>
  
  <fieldset hidden='hidden' id="xActOnGive">
    
    <div class="form-group">
      <%= f.label :extended_value_1, 'Object to receive', :class => 'control-label col-md-2' %>
      <div class="col-md-10">
        <%= f.collection_select(:extended_value_1, @area.objs.order('vnum ASC'), :id, :vnum_and_sdesc, {}, {:id => 'ObjToReceive', :class => 'form-control'})  %>
      </div>
    </div>
    
    <div class="form-group">
      <%= f.label :extended_value_2, "Mobile's action", :class => 'control-label col-md-2' %>
      <div class="col-md-10">
        <%= f.select(:extended_value_2, options_for_select(
            [
              ['Transfer PC', 0],
              ['Give PC object', 1]
            ], @special.extended_value_2
          ), {}, {id: "MobilesAction", class: "form-control"}) %>
      </div>
    </div>
    
    <fieldset id="ActOnGive_GiveObj">
      <div class="form-group">
        <%= f.label :extended_value_3, 'Object to give', :class => 'control-label col-md-2' %>
        <div class="col-md-10">
          <%= f.collection_select(:extended_value_3, @area.objs.order('vnum ASC'), :id, :vnum_and_sdesc, {}, {:id => 'ObjToGive', :class => 'form-control'})  %>
        </div>
      </div>
    </fieldset>
    
    <fieldset id="ActOnGive_Transfer">
      <div class="form-group">
        <%= f.label :extended_value_3, 'Transfer to room', :class => 'control-label col-md-2' %>
        <div class="col-md-10">
          <%= f.collection_select(:extended_value_3, @area.rooms.order('vnum ASC'), :id, :vnum_and_name, {}, {:id => 'RoomForTransfer', :class => 'form-control'})  %>
        </div>
      </div>
    </fieldset>

    <%= f.hidden_field :extended_value_4, :value => -1 %>
    
    <div class="form-group">
      <%= f.label :extended_value_5, 'Action description', :class => 'control-label col-md-2' %>
      <div class="col-md-10">
      <%= f.select(:extended_value_5, options_for_select(
          [['Default description', -1]] + @area.area_strings.order('vnum ASC').map{ |e| [e.vnum_and_strings, e.id] }, @special.extended_value_5
        ), {}, {class: "form-control"}) %>
      </div>
    </div>
  </fieldset>
  
  <fieldset hidden='hidden' id="xCallForHelp">

    <div class="form-group">
      <%= f.label :extended_value_1, "Requested helper", :class => 'control-label col-md-2' %>
      <div class="col-md-10">
        <%= f.select(:extended_value_1, options_for_select(
            [
              ['Mobile with spec_cxxx', 1],
              ['Mobile with spec_sxxx', 2]
            ], @special.extended_value_1
          ), {}, {id: "RequestedHelper", class: "form-control"}) %>
      </div>
    </div>

    <div class="form-group">
      <%= f.label :extended_value_2, "Helper distance", :class => 'control-label col-md-2' %>
      <div class="col-md-10">
        <%= f.select(:extended_value_2, options_for_select(
            [
              ['World-wide', -1],
              ['Helper within same room', 0],
              ['Helper within same area', 1]
            ], @special.extended_value_2
          ), {}, {id: "RequestedHelper", class: "form-control"}) %>
      </div>
    </div>
    
    <%= f.hidden_field :extended_value_3, :value => -1 %>
    <%= f.hidden_field :extended_value_4, :value => -1 %>
    <%= f.hidden_field :extended_value_5, :value => -1 %>

  </fieldset>
  
  <fieldset hidden='hidden' id="xMageProtector">
    <div class="form-group">
      <%= f.label :extended_value_1, 'Message', :class => 'control-label col-md-2' %>
      <div class="col-md-10">
      <%= f.select(:extended_value_1, options_for_select(
          [['Default message', -1]] + @area.area_strings.order('vnum ASC').map{ |e| [e.vnum_and_strings, e.id] }, @special.extended_value_1
        ), {}, {class: "form-control"}) %>
      </div>
    </div>
    
    <%= f.hidden_field :extended_value_2, :value => -1 %>
    
    <%= f.hidden_field :extended_value_3, :value => -1 %>
    
    <%= f.hidden_field :extended_value_4, :value => -1 %>
    
    <%= f.hidden_field :extended_value_5, :value => -1 %>
  </fieldset>
  
  <fieldset hidden='hidden' id="xTimedTeleport">
    
    <div class="form-group">
      <%= f.label :extended_value_1, 'Hour', :class => 'control-label col-md-2' %>
      <div class="col-md-10">
        <%= f.select(:extended_value_1, options_for_select(hours_list, @special.extended_value_1
            ), {}, {class: "form-control"}) %>
      </div>
    </div>
  
    <div class="form-group">
      <%= f.label :extended_value_2, 'n <small>(for a 1 in 2<sup>n</sup> chance)</small>'.html_safe, :class => 'control-label col-md-2' %>
      <div class="col-md-10">
        <%= f.text_field :extended_value_2, {:id => 'ChanceN', :class => 'text_field form-control'} %>
      </div>
    </div>
    
    <div class="form-group">
      <%= f.label 'Chance', :class => 'control-label col-md-2' %>
      <div class="col-md-10">
        <input class="text_field form-control" id="Chance"  type="text" disabled="disabled" />
      </div>
    </div>
    
  </fieldset>

  <div class="form-group">
    <div class='col-md-offset-2 col-md-10'>
      <%= f.submit nil, :class => 'btn btn-primary' %>
      <%= link_to t('.cancel', :default => t("helpers.links.cancel")),
                  area_mobile_path(@area, @mobile), :class => 'btn btn-default' %>
    </div>
  </div>
  
<script type = "text/javascript">
  initSpecialsForm();
</script>

<% end %>
